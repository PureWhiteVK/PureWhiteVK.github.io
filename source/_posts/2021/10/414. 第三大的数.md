---
title: 414. 第三大的数
mathjax: true
tags:
  - 算法
category: LeetCode刷题记录
abbrlink: e56d
date: 2021-10-06
---
# 414. 第三大的数

给你一个非空数组，返回此数组中 **第三大的数**（所有不同数字中排第三大的数） 。如果不存在，则返回数组中最大的数。

**提示：**

- 1 <= nums.length <= 10<sup>4</sup>
- -2<sup>31</sup> <= nums[i] <= 2<sup>31</sup> - 1

<!-- more -->

## 排序

如果使用排序就没有什么好说的，使用set去重并进行排序，找到第三个最大的即可

```java
class Solution {
    public int thirdMax(int[] nums) {
        // 由于存在 Integer.MIN_VALUE，当出现减法的时候，比较器就会失效，需要操作一下
        PriorityQueue<Integer> queue = new PriorityQueue<>((a,b)->a==b?0:(a>b?-1:1));
        Set<Integer> set = new HashSet<>();
        for(int i:nums){
            if(!set.contains(i)){
                queue.offer(i);
                set.add(i);
            }
        }
        if(queue.size() < 3) return queue.poll();
        queue.poll();
        queue.poll();
        return queue.poll();
    }
}
```

由于本题数据卡的比较死，在排序算法中需要注意比较器的设置，如果直接使用 

```java
new Comparatpr<Integer>(){
  @Override
  public int compare(int o1,int o2){
    return o2 - o1;
  }
}
```

当遇到 o2 - o1 溢出的时候就会排序出错，因此需要直接判断 o2 和 o1 的大小，比较器设置如下

```java
new Comparator<Integer>(){
  @Override
  public int compare(int o1,int o2){
    if(o1 == o2) return 0;
    if(o1 < o2) return 1;
    return -1;
  }
}
```

确保返回值不会溢出，且能正确表示序关系，这样就实现正确的排序，最后找出第三大的值即可

## 遍历

> **经典的找数组次大值的做法是使用两个变量 `a` 和 `b` 分别存储遍历过程中的最大值和次大值。**
>
> [【宫水三叶】一题双解 :「排序」&「遍历」 - 第三大的数 - 力扣（LeetCode） (leetcode-cn.com)](https://leetcode-cn.com/problems/third-maximum-number/solution/gong-shui-san-xie-yi-ti-shuang-jie-pai-x-pmln/)

类似于找次大值的做法，我们可以使用三个变量a，b，c来分别存储遍历过程中的最大值、次大值和第三大值，最后返回c即可

由于 a，b，c之间存在序关系 `a > b > c`

对于当前遍历的值，其更新规则是：

```
if x > a:
		// 直接更新最大值，其他值依次后推
    c = b;
    b = a;
    a = x;
elif x < a && x > b:
		// 此处判断条件中必须添加 x < a，防止 x和a值相同
		// 更新次大值
		c = b;
		b = x;
elif x < b && x > c:
		// 添加 x < b的原因也是一样，防止出现值相同的情况
		// 更新第三大值
		c = x;
```

由于数据最小值为 Integer,MIN_VALUE，此时无法判断是不存在第三大值还是第三大值就是Integer.MIN_VALUE

我们使用long来存储a，b，c三个值，并用 Long.MIN_VALUE进行初始化，这样就可以判断

```java
class Solution {
    public int thirdMax(int[] nums) {
        long a = Long.MIN_VALUE,b = Long.MIN_VALUE,c = Long.MIN_VALUE;
        for(int x:nums){
            // System.out.println(a+" "+b+" "+c);
            if(x > a){
                c = b;
                b = a;
                a = x;
            }else if(x < a && x > b){
                c = b;
                b = x;
            }else if(x < b && x > c){
                c = x;
            }
        }
        return c == Long.MIN_VALUE ? (int)a : (int)c;
    }
}
```



