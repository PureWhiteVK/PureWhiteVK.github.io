<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
  <link rel="mask-icon" href="/images/favicon/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"purewhitevk.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.14.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"default"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="nohup 命令使用 最近需要在服务器上跑模型，需要长时间运行，但是服务器是通过 ssh 连接的，如果我们中途断开连接，正在跑的代码也会自动关闭。实在是有点整蛊，要想 ssh 断开连接后代码还可以继续执行，需要使用 nohup 命令。 使用 nohup --help，我们可以得到帮助信息 12345678910111213141516171819202122(base) ➜  ~ nohup --">
<meta property="og:type" content="article">
<meta property="og:title" content="nohup命令使用">
<meta property="og:url" content="https://purewhitevk.github.io/posts/80b6/">
<meta property="og:site_name" content="PureWhiteVK&#39;s Blog">
<meta property="og:description" content="nohup 命令使用 最近需要在服务器上跑模型，需要长时间运行，但是服务器是通过 ssh 连接的，如果我们中途断开连接，正在跑的代码也会自动关闭。实在是有点整蛊，要想 ssh 断开连接后代码还可以继续执行，需要使用 nohup 命令。 使用 nohup --help，我们可以得到帮助信息 12345678910111213141516171819202122(base) ➜  ~ nohup --">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230312232908661.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230312233524825.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230312235648581.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230312235934838.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313000446837.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313225021012.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313225834031.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313230232701.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313230446035.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313230618924.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313232650321.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313232709124.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313233059684.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313233205333.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313233726388.png">
<meta property="og:image" content="https://purewhitevk.github.io/posts/80b6/image-20230313233446900.png">
<meta property="article:published_time" content="2023-03-01T15:09:12.000Z">
<meta property="article:modified_time" content="2023-03-01T15:09:12.000Z">
<meta property="article:author" content="PureWhiteVK">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="nohup">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://purewhitevk.github.io/posts/80b6/image-20230312232908661.png">


<link rel="canonical" href="https://purewhitevk.github.io/posts/80b6/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://purewhitevk.github.io/posts/80b6/","path":"posts/80b6/","title":"nohup命令使用"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>nohup命令使用 | PureWhiteVK's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">PureWhiteVK's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">21</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">7</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">164</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#nohup-%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8"><span class="nav-number">1.</span> <span class="nav-text">nohup 命令使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#signal"><span class="nav-number">1.1.</span> <span class="nav-text">SIGNAL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nohup-%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="nav-number">1.2.</span> <span class="nav-text">nohup 简单使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="nav-number">1.3.</span> <span class="nav-text">后台运行程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91pipe%E6%93%8D%E4%BD%9C"><span class="nav-number">1.4.</span> <span class="nav-text">输出重定向（pipe操作）</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="PureWhiteVK"
      src="/images/Touma.Kazusa.256x256.png">
  <p class="site-author-name" itemprop="name">PureWhiteVK</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">164</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/PureWhiteVK" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;PureWhiteVK" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yl_xiao@outlook.com" title="E-Mail → mailto:yl_xiao@outlook.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/dead.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://purewhitevk.github.io/posts/80b6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Touma.Kazusa.256x256.png">
      <meta itemprop="name" content="PureWhiteVK">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PureWhiteVK's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="nohup命令使用 | PureWhiteVK's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          nohup命令使用
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023/03/01 23:09:12" itemprop="dateCreated datePublished" datetime="2023-03-01T23:09:12+08:00">2023/03/01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">Linux学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>11 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="nohup-命令使用">nohup 命令使用</h1>
<p>最近需要在服务器上跑模型，需要长时间运行，但是服务器是通过 ssh
连接的，如果我们中途断开连接，正在跑的代码也会自动关闭。实在是有点整蛊，要想
ssh 断开连接后代码还可以继续执行，需要使用 <code>nohup</code> 命令。</p>
<p>使用 <code>nohup --help</code>，我们可以得到帮助信息</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(base) ➜  ~ nohup --help</span><br><span class="line">Usage: nohup COMMAND [ARG]...</span><br><span class="line">  or:  nohup OPTION</span><br><span class="line">Run COMMAND, ignoring hangup signals.</span><br><span class="line"></span><br><span class="line">      --help     display this help and exit</span><br><span class="line">      --version  output version information and exit</span><br><span class="line"></span><br><span class="line">If standard input is a terminal, redirect it from an unreadable file.</span><br><span class="line">If standard output is a terminal, append output to &#x27;nohup.out&#x27; if possible,</span><br><span class="line">&#x27;$HOME/nohup.out&#x27; otherwise.</span><br><span class="line">If standard error is a terminal, redirect it to standard output.</span><br><span class="line">To save output to FILE, use &#x27;nohup COMMAND &gt; FILE&#x27;.</span><br><span class="line"></span><br><span class="line">NOTE: your shell may have its own version of nohup, which usually supersedes</span><br><span class="line">the version described here.  Please refer to your shell&#x27;s documentation</span><br><span class="line">for details about the options it supports.</span><br><span class="line"></span><br><span class="line">GNU coreutils online help: &lt;https://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report nohup translation bugs to &lt;https://translationproject.org/team/&gt;</span><br><span class="line">Full documentation at: &lt;https://www.gnu.org/software/coreutils/nohup&gt;</span><br><span class="line">or available locally via: info &#x27;(coreutils) nohup invocation&#x27;</span><br></pre></td></tr></table></figure>

<p>其中第三行解释了 nohup 命令的作用</p>
<blockquote>
<p><em>Run COMMAND, ignoring hangup signals.</em></p>
</blockquote>
<p>从描述中我们可以看到，其作用其实很简单，就是忽略 <code>hup</code>
信号。那么现在问题来了，<code>hup</code> 信号是什么？有什么作用？</p>
<span id="more"></span>

<h2 id="signal">SIGNAL</h2>
<p>信号可以理解成一种操作系统和进程之间的交互方式（IPC），当用户进程接收到信号时，其需要对信号进行响应，例如停止运行等（因此也可以理解为软件中断）</p>
<p>通过 <code>kill -l</code>
命令，我们可以查询到当前系统支持的所有信号（前 15
个信号为固定语义信号，后面的和具体实现有关，不同的 linux
之间不一致。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) ➜  test-nohup kill -l</span><br><span class="line">HUP INT QUIT ILL TRAP ABRT BUS FPE KILL USR1 SEGV USR2 PIPE ALRM TERM STKFLT CHLD CONT STOP TSTP TTIN TTOU URG XCPU XFSZ VTALRM PROF WINCH POLL PWR SYS</span><br></pre></td></tr></table></figure>

<blockquote>
<p>具体信号含义以及对应的数字值可以参考：</p>
<p><a
target="_blank" rel="noopener" href="https://www.man7.org/linux/man-pages/man7/signal.7.html">signal(7)
- Linux manual page (man7.org)</a> 中 Standard signals 部分</p>
</blockquote>
<p>也可以使用 <code>kill</code> 命令向进程发送信号，例如
<code>kill -9 &lt;PID&gt; </code> 就表示强制杀死进程号为
<code>PID</code> 的进程</p>
<p>下面展示几个比较常用的信号</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">signal name</th>
<th style="text-align: center;">signal number</th>
<th style="text-align: left;">description</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SIGHUP</td>
<td style="text-align: center;">1</td>
<td style="text-align: left;">Hangup detected on controlling terminal or
death of controlling process</td>
<td>检测到控制程序或命令行挂起</td>
</tr>
<tr class="even">
<td style="text-align: left;">SIGINT</td>
<td style="text-align: center;">2</td>
<td style="text-align: left;">Interrupt from keyboard</td>
<td>键盘中断（<kbd>Ctrl</kbd> + <kbd>C</kbd>）</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SIGKILL</td>
<td style="text-align: center;">9</td>
<td style="text-align: left;">Kill signal</td>
<td>杀死信号</td>
</tr>
<tr class="even">
<td style="text-align: left;">SIGSEGV</td>
<td style="text-align: center;">11</td>
<td style="text-align: left;">Invalid memory reference</td>
<td>无效的内存引用（访问）</td>
</tr>
</tbody>
</table>
<p>在 python 中，我们可以使用 <code>signal</code>
库来响应信号（也可以用来忽略信号，但是跨平台就难做了）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> signal</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] write <span class="subst">&#123;i:03d&#125;</span> to stdout&#x27;</span>,file=sys.stdout)</span><br><span class="line">        <span class="keyword">await</span> asyncio.sleep(<span class="number">0.5</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] write <span class="subst">&#123;i:03d&#125;</span> to stderr&#x27;</span>,file=sys.stderr)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_signal</span>(<span class="params">signum:<span class="built_in">int</span>,frame</span>):</span><br><span class="line">    _signal = signal.Signals(signum)</span><br><span class="line">    e = OSError()</span><br><span class="line">    e.errno = <span class="number">0</span></span><br><span class="line">    e.strerror = <span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] received signal: <span class="subst">&#123;_signal.name&#125;</span>(<span class="subst">&#123;_signal.value&#125;</span>)&#x27;</span></span><br><span class="line">    <span class="keyword">raise</span> e</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    signal.signal(signal.SIGINT,on_signal)</span><br><span class="line">    asyncio.run(main())</span><br></pre></td></tr></table></figure>

<p>通过 <code>python main.py</code> 运行后，再通过键盘输入
<kbd>Ctrl</kbd> +
<kbd>C</kbd>，就可以看到响应输出，同时程序也结束了（手动抛出了一个异常）</p>
<p><img data-src="/posts/80b6/image-20230312232908661.png"
style="zoom: 67%;" /></p>
<p>对于 SIGHUP
信号，我们也可以同样进行测试，<strong>通过终端运行代码，然后关闭终端</strong>，就可以在输出中看到结果。稍微修改一下代码，将
stdout 和 stderr 重定向到文件中便于查看</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> signal</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] write <span class="subst">&#123;i:03d&#125;</span> to stdout&#x27;</span>,file=sys.stdout)</span><br><span class="line">        <span class="keyword">await</span> asyncio.sleep(<span class="number">0.5</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] write <span class="subst">&#123;i:03d&#125;</span> to stderr&#x27;</span>,file=sys.stderr)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_signal</span>(<span class="params">signum:<span class="built_in">int</span>,frame</span>):</span><br><span class="line">    _signal = signal.Signals(signum)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] received signal: <span class="subst">&#123;_signal.name&#125;</span>(<span class="subst">&#123;_signal.value&#125;</span>)&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    signal.signal(signal.SIGHUP,on_signal)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;output.log&#x27;</span>,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        sys.stdout = f</span><br><span class="line">        sys.stderr = f</span><br><span class="line">        asyncio.run(main())</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;exit&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果如下</p>
<p><img data-src="/posts/80b6/image-20230312233524825.png"
style="zoom:50%;" /></p>
<p>我们的代码只是接受信号并输出一句话，并没有看到预期的
exit，说明程序被操作系统关闭了，如果需要命令在终端关闭后还能继续执行，就需要通过
<code>nohup</code> 命令来确保进程能在后台继续执行。</p>
<h2 id="nohup-简单使用">nohup 简单使用</h2>
<p><code>nohuo</code> 命令使用起来很简单，在待执行的命令之前添加一个
<code>nohup</code> 即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> &lt;your-command&gt;</span><br></pre></td></tr></table></figure>

<p>示例如下，还是之前的 python 代码，但是我们通过 <code>nohup</code>
来执行，然后关闭终端，测试运行效果</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> python main.py</span><br></pre></td></tr></table></figure>

<p>运行后终端会提示一句话</p>
<p><img data-src="/posts/80b6/image-20230312235648581.png"
style="zoom:67%;" /></p>
<p>同时我们会在当前目录下看到 <code>nohup.out</code>
文件，虽然里面没有任何东西（因为我们将 python 的输出重定向到了
<code>output.log</code>）</p>
<p><img data-src="/posts/80b6/image-20230312235934838.png"
style="zoom:50%;" /></p>
<p>我们可以看到程序是执行完循环后主动退出的，而不是由操作系统关闭，说明
<code>nohup</code> 命令起作用了。</p>
<p>为了更清楚的看到 <code>nohup</code> 的作用，我们将 python
代码中的输出重定向去掉</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> signal</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] write <span class="subst">&#123;i:03d&#125;</span> to stdout&#x27;</span>,file=sys.stdout)</span><br><span class="line">        <span class="keyword">await</span> asyncio.sleep(<span class="number">0.5</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] write <span class="subst">&#123;i:03d&#125;</span> to stderr&#x27;</span>,file=sys.stderr)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_signal</span>(<span class="params">signum:<span class="built_in">int</span>,frame</span>):</span><br><span class="line">    _signal = signal.Signals(signum)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] received signal: <span class="subst">&#123;_signal.name&#125;</span>(<span class="subst">&#123;_signal.value&#125;</span>)&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    signal.signal(signal.SIGHUP,on_signal)</span><br><span class="line">    <span class="comment"># with open(&#x27;output.log&#x27;,&#x27;w&#x27;) as f:</span></span><br><span class="line">    <span class="comment">#     sys.stdout = f</span></span><br><span class="line">    <span class="comment">#     sys.stderr = f</span></span><br><span class="line">    asyncio.run(main())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;exit&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>然后再次执行，并关闭命令行</p>
<p>命令行输出如下</p>
<p><img data-src="/posts/80b6/image-20230313000446837.png"
style="zoom: 67%;" /></p>
<p>但是程序本身的输出并没有出现在这里，查看
<code>nohup.out</code>，我们可以在 <code>nohup.out</code>
中看到完整的输出结果</p>
<p><img data-src="/posts/80b6/image-20230313225021012.png"
style="zoom:50%;" /></p>
<p>可以看到程序最后输出了
<code>exit</code>，表示程序正常退出，但我们同样接受到了
<code>SIGHUP</code> 信号，此时却没有被系统杀死，这就是
<code>nohup</code> 在起作用了。</p>
<h2 id="后台运行程序">后台运行程序</h2>
<p>当我们通过 <code>nohup</code>
执行应用程序时，当前终端并不能进行交互，但是我们也看不到进程的任何输出（因为
<code>nohup</code> 将其重定向到 <code>nohup.out</code>
里了），与其让终端等待进程执行完，不如将进程放在后台执行，然后使用终端进行其他操作。</p>
<p>后台执行程序也十分简单，只需要在命令后添加一个 <code>&amp;</code>
即可，然后在终端中就会输出后台执行命令的 <code>PID</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> signal</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] write <span class="subst">&#123;i:03d&#125;</span> to stdout&#x27;</span>,file=sys.stdout)</span><br><span class="line">        <span class="keyword">await</span> asyncio.sleep(<span class="number">0.5</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] write <span class="subst">&#123;i:03d&#125;</span> to stderr&#x27;</span>,file=sys.stderr)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_signal</span>(<span class="params">signum:<span class="built_in">int</span>,frame</span>):</span><br><span class="line">    _signal = signal.Signals(signum)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] received signal: <span class="subst">&#123;_signal.name&#125;</span>(<span class="subst">&#123;_signal.value&#125;</span>)&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    signal.signal(signal.SIGHUP,on_signal)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;output.log&#x27;</span>,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        sys.stdout = f</span><br><span class="line">        sys.stderr = f</span><br><span class="line">        asyncio.run(main())</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;exit&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<p><img data-src="/posts/80b6/image-20230313225834031.png"
style="zoom:67%;" /></p>
<p>此时终端就可以不等待进程执行完，立即返回了，<strong>但是如果进程有输出的话，还是会继续输出到命令行中，让我们无法进行交互，因此后台执行的进程最好将输出都给重定向一下</strong></p>
<p>我们也可以对其进行测试</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> signal</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] write <span class="subst">&#123;i:03d&#125;</span> to stdout&#x27;</span>,file=sys.stdout)</span><br><span class="line">        <span class="keyword">await</span> asyncio.sleep(<span class="number">0.5</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] write <span class="subst">&#123;i:03d&#125;</span> to stderr&#x27;</span>,file=sys.stderr)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_signal</span>(<span class="params">signum:<span class="built_in">int</span>,frame</span>):</span><br><span class="line">    _signal = signal.Signals(signum)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;[<span class="subst">&#123;datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S.%f&quot;</span>)&#125;</span>] received signal: <span class="subst">&#123;_signal.name&#125;</span>(<span class="subst">&#123;_signal.value&#125;</span>)&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    signal.signal(signal.SIGHUP,on_signal)</span><br><span class="line">    <span class="comment"># with open(&#x27;output.log&#x27;,&#x27;w&#x27;) as f:</span></span><br><span class="line">    <span class="comment">#     sys.stdout = f</span></span><br><span class="line">    <span class="comment">#     sys.stderr = f</span></span><br><span class="line">    asyncio.run(main())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;exit&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<p><img data-src="/posts/80b6/image-20230313230232701.png"
style="zoom:67%;" /></p>
<p>此时我们按什么都没用，因为我们无法直接和进程交互，可以通过
<code>kill</code> 方式向进程发送信号，然后停止进程（由于 stdout
一直有输出，命令行交互的体验极差，让人想直接把他 kill 掉）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -HUP 1688</span><br></pre></td></tr></table></figure>

<p><img data-src="/posts/80b6/image-20230313230446035.png"
style="zoom:67%;" /></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 1850</span><br></pre></td></tr></table></figure>

<p><img data-src="/posts/80b6/image-20230313230618924.png"
style="zoom:67%;" /></p>
<p>此时我们可以发现，<code>nohup</code>
命令和后台运行简直是绝配，既可以将输出重定向到文件，且可以保证终端关闭后代码也能继续执行，完整代码就是</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> &lt;your-command&gt; &amp;</span><br></pre></td></tr></table></figure>

<h2 id="输出重定向pipe操作">输出重定向（pipe操作）</h2>
<p><code>nohup</code>
命令自动帮我们配置好了输出重定向，有时候我们也想将输出保存到文件，从而便于我们观察输出结果（尤其是
gcc 编译结果，一报错出特别多，stdout
溢出了也看不到结果），此时我们就需要手动进行输入输出的重定向了。</p>
<p>在代码中，有三个特殊的文件，分别是
<code>stdin</code>、<code>stdout</code> 以及 <code>stderr</code>，在
python 中可以使用 <code>sys.stdin</code> 以及 <code>sys.stdout</code> 和
<code>sys.stderr</code> (之前的代码中也有使用，我们分别向 stderr 和
stdout 中输出了结果)</p>
<p>由于这三个是特殊的文件，自然也可以使用其他文件来代替，此时就是重定向了，而在
unix 环境下（其实 powershell
目前也支持了）可以在操作系统层面进行重定向，这样我们就不需要修改代码了。</p>
<p>下面列举了常用的重定向操作符</p>
<table>
<thead>
<tr class="header">
<th>operator</th>
<th>name</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[a]&gt;[b]</code></td>
<td>output to</td>
<td>将 a 的内容输出到 b 中</td>
</tr>
<tr class="even">
<td><code>[a]&gt;&gt;[b]</code></td>
<td>append to</td>
<td>将 a 的内容追加到 b 中</td>
</tr>
<tr class="odd">
<td><code>[a]&lt;[b]</code></td>
<td>read from</td>
<td>将 b 的内容读取到 a 中</td>
</tr>
<tr class="even">
<td>`[a]</td>
<td>[b]`</td>
<td>pipeing</td>
</tr>
</tbody>
</table>
<p>实例如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hello to stdout&#x27;</span>,file=sys.stdout)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hello to stderr&#x27;</span>,file=sys.stderr)</span><br></pre></td></tr></table></figure>

<p>执行命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python main.py &gt; stdout.log</span><br></pre></td></tr></table></figure>

<p>如果不加上任何符号，则默认将 stdout 重定向到 stdout.log 中，但是
stderr 还是会在终端中输出</p>
<p>运行结果</p>
<p><img data-src="/posts/80b6/image-20230313232650321.png"
style="zoom:67%;" /></p>
<p>同时 <code>stdout.log</code> 结果</p>
<p><img data-src="/posts/80b6/image-20230313232709124.png"
style="zoom:67%;" /></p>
<p>和我们的预期结果一样</p>
<p>要想指定输入输出流的文件，我们可以使用数字来代指（可以理解为指针），其中
<code>0</code> 表示 <code>stdin</code>， <code>1</code> 表示
<code>stdout</code>，<code>2</code> 表示 <code>stderr</code></p>
<p>还是上面的代码，但是我们调整一下调用命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python main.py 1&gt;stdout.log 2&gt;stderr.log</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意： 数字和符号之间没有空格，即
<code>1&gt;</code>，<code>0&lt;</code> 的形式</p>
</blockquote>
<p>运行结果</p>
<p><img data-src="/posts/80b6/image-20230313233059684.png"
style="zoom:67%;" /></p>
<p>两个文件结果</p>
<p><img data-src="/posts/80b6/image-20230313233205333.png" /></p>
<p>最后，我们可以将 stderr 重定向到
stdout，不过写法稍微特殊一点，可以理解为 C
语言的取地址（<code>&amp;1</code> 相当于是拿到 stdout 实际输出地址）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python main.py &gt; stdout.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p>这样 stdout 和 stderr 的结果就都会出现在 stdout.log 里面了</p>
<p><img data-src="/posts/80b6/image-20230313233726388.png"
style="zoom: 67%;" /></p>
<p>而对于 <code>|</code> ，一个很常用的例子就是检索（通过
<code>grep</code> 实现），例如我们想查询当前 python 环境中是否安装
<code>numpy</code>，可以使用一下命令进行查看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m pip list | grep numpy</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<p><img data-src="/posts/80b6/image-20230313233446900.png" /></p>
<p>还有很多高级用法，但是基本使用就介绍到这里</p>
<blockquote>
<p>注：为什么要有两个输出 <code>stdout</code> 和
<code>stderr</code>？</p>
<p>例如 pandoc 程序 ，其可以接受一个 md 文档并将其转换成
html，如果我们只是使用 pandoc
做其中一步操作，还需要后续操作的话，我们就可以使用 stdout
读取其输出结果，而通过 stderr
拿到其日志输出、警告的信息。这也是为什么即使我们优先输出到
stdout，然后再输出到 stderr，最终仍然是 stderr 的结果优先输出，因为
stderr 是<strong>无缓冲的</strong>，有结果就直接输出了。</p>
</blockquote>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>PureWhiteVK
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://purewhitevk.github.io/posts/80b6/" title="nohup命令使用">https://purewhitevk.github.io/posts/80b6/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/dead.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"># Linux</a>
              <a href="/tags/nohup/" rel="tag"># nohup</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/f9ab/" rel="prev" title="zerotier实现内网穿透">
                  <i class="fa fa-chevron-left"></i> zerotier实现内网穿透
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/4a2b/" rel="next" title="Dockerfile常见环境使用">
                  Dockerfile常见环境使用 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">PureWhiteVK</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">156k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">9:25</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
